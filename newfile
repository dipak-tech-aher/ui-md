import React, { useState, useRef } from "react";
import ReactQuill from "react-quill";
import "react-quill/dist/quill.snow.css";

const MyTextEditor = () => {
  const [value, setValue] = useState("");
  const quillRef = useRef(null);

  // Find and highlight text
  const findText = (searchTerm) => {
    const editor = quillRef.current.getEditor();
    const text = editor.getText();
    const index = text.indexOf(searchTerm);

    if (index !== -1) {
      editor.setSelection(index, searchTerm.length);
    } else {
      alert("Text not found");
    }
  };

  // Replace the found text
  const replaceText = (searchTerm, replaceTerm) => {
    const editor = quillRef.current.getEditor();
    const text = editor.getText();
    const index = text.indexOf(searchTerm);

    if (index !== -1) {
      editor.setSelection(index, searchTerm.length);
      editor.deleteText(index, searchTerm.length);
      editor.insertText(index, replaceTerm);
    } else {
      alert("Text not found");
    }
  };

  return (
    <div>
      <ReactQuill
        ref={quillRef}
        value={value}
        onChange={setValue}
        modules={{
          toolbar: [
            [{ font: [] }, { header: [1, 2, false] }],
            ["bold", "italic", "underline", "strike"],
            [{ color: [] }, { background: [] }],
            [{ align: [] }],
            [{ list: "ordered" }, { list: "bullet" }],
            ["link", "image"],
            ["clean"],
          ],
        }}
        formats={[
          "font",
          "header",
          "bold",
          "italic",
          "underline",
          "strike",
          "color",
          "background",
          "align",
          "list",
          "bullet",
          "link",
          "image",
        ]}
        style={{ minHeight: "200px" }}
        placeholder="Compose your text here..."
      />
      <div style={{ marginTop: "20px" }}>
        <input
          type="text"
          id="findInput"
          placeholder="Find text"
          style={{ marginRight: "10px" }}
        />
        <button
          onClick={() => findText(document.getElementById("findInput").value)}
        >
          Find
        </button>
        <input
          type="text"
          id="replaceInput"
          placeholder="Replace with"
          style={{ marginLeft: "20px", marginRight: "10px" }}
        />
        <button
          onClick={() =>
            replaceText(
              document.getElementById("findInput").value,
              document.getElementById("replaceInput").value
            )
          }
        >
          Replace
        </button>
      </div>
    </div>
  );
};

export default MyTextEditor;
